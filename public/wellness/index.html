<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SahaayAI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Kannada:wght@400;700&display=swap" rel="stylesheet">
</head>
<style>
    * {
    margin: 0;
    font-family: 'Times New Roman', Times, serif;
    box-sizing: border-box;
}

/* Navigation Bar */
.nav {
    background-color: #50e9df;
    height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
}

/* Change .diva to use min-height instead of height */
.diva {
    margin-top: 1px;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh; /* Changed from height: 100vh */
    padding: 50px 0; /* Add padding to give space */
    background-color: #ffffff;
}

/* Increase container padding for more space */
.unique-container {
    background: #ffffff;
    padding: 40px; /* Increased from 30px */
    border-radius: 12px;
    box-shadow: 0 0 24px 4px rgba(0, 0, 0, 0.3);
    max-width: 600px;
    width: 100%;
    margin-top: 1rem;
}

/* Make heading larger */
.unique-heading {
    text-align: center;
    margin-bottom: 30px; /* Increased from 20px */
    font-size: 28px; /* Increased from 24px */
    color: #333;
    font-weight: bold;
}

.unique-input-group {
    margin-bottom: 20px; /* Increased from previous value */
}

.unique-label {
    display: block;
    margin-bottom: 8px;
    font-size: 18px; /* Increased from 16px */
    font-weight: bold; /* Make labels bold */
    color: #333;
}

.unique-input {
    width: 100%;
    padding: 15px; /* Increased from 12px */
    font-size: 16px; /* Increased from 14px */
    border: 2px solid #3a87ad; /* More visible border with color */
    border-radius: 6px;
    background: #f9f9f9;
    transition: border 0.3s ease;
    margin-bottom: 15px; /* Add space between input and next label */
    height: 50px; /* Explicitly set height for text inputs */
}

select.unique-input {
    height: 50px;
}

.unique-input:focus {
    border-color: #007bff;
    outline: none;
    background: #ffffff;
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
}

.unique-voice-btn,
.unique-submit-btn {
    width: 100%;
    padding: 15px; /* Increased from 12px */
    font-size: 18px; /* Increased from 16px */
    font-weight: 600;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-bottom: 20px; /* Increased from 15px */
    height: 50px; /* Match height of inputs */
}

.unique-voice-btn {
    background-color: #0056b3;
}

.unique-voice-btn:hover {
    background-color: #003d82;
}

.unique-submit-btn {
    background-color: #28a745;
}

.unique-submit-btn:hover {
    background-color: #218838;
}

/* Responsive Styles */
@media (max-width: 600px) {
    .unique-container {
        max-width: 90%;
    }
}

/* Logo */
.logo {
    background-image: url("https://www.sify.com/wp-content/uploads/2024/07/AI_robot_loneliness_older_vecteezy_1200.jpg");
    height: 152px;
    width: 500px;
    border: 2px solid whitesmoke;
    background-size: cover;
}

/* Navbar */
.navbar {
    height: 180px;
    background-color: #e7931d;
    display: flex;
    align-items: center;
    justify-content: space-evenly;
}

/* Border Effects */
.border {
    border: 1.2px solid transparent;
}

.border:hover {
    border: 2px solid azure;
}

/* Search Bar */
.navsearch {
    display: flex;
    justify-content: space-evenly;
    background: #ffffff;
    width: 800px;
    height: 85px;
    border-radius: 3px;
}

.navsearch:hover {
    border: 5px solid #673005;
}

.seaselect {
    background: #180303;
    width: 75px;
    text-align: center;
    font-size: 1.2rem;
    border-radius: 4px 0 0 4px;
    border: none;
    color: white;
}

.seainput {
    width: 90%;
    font-size: 1.3rem;
    border: none;
}

.searchicon {
    width: 80px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    background: darkgoldenrod;
    border-radius: 0 4px 4px 0;
    color: #0f1111;
}

/* Fix the hero section positioning */
.herosection {
    margin-top: 2px; /* Changed from 14rem */
    background: url("https://www.sify.com/wp-content/uploads/2024/07/AI_robot_loneliness_older_vecteezy_1200.jpg") no-repeat center;
    height: 300px; /* Reduced from 1000px to a more reasonable size */
    background-size: contain;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    margin-bottom: 20px;
}

.heromsg {
    margin-top: 20px;
    background: #2660a4;
    color: azure;
    border-radius: 2rem;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    width: 86%;
}

.heromsg:hover {
    transition-timing-function: ease-in;
    outline: 0.65rem solid rgba(68, 63, 63, 0.4);
}

/* Shop Section */
.shopsection {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-evenly;
    background: url("background.jpg") repeat;
}

.box {
    height: 400px;
    width: 23%;
    background: azure;
    padding: 20px;
    border-radius: 1.5rem;
    margin-top: 100px;
}

.boximg {
    height: 300px;
    background-size: cover;
    margin-top: 1rem;
    border-radius: 1rem;
}

/* Praise Section */
.praise {
    background: url("background.jpg") no-repeat center;
    background-size: cover;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    height: 600px;
    width: 100%;
}

.boximge {
    height: 300px;
    width: 350px;
    background-size: cover;
}

/* Footer */
.look {
    background: url("background.jpg") no-repeat center;
    background-size: cover;
    height: 135px;
}

/* Adjust the output section to have proper positioning */
.output-section {
    margin: 30px auto; /* Changed from 170px auto */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    background: #ffffff;
    padding: 20px;
    width: 50%;
    border-radius: 8px;
    box-shadow: 0 0 24px 4px rgba(0, 0, 0, 0.3);
}

/* Styling for Download Button */
.download-btn {
    display: inline-block;
    padding: 10px 20px;
    margin-top: 10px;
    text-decoration: none;
    background: #007bff;
    color: white;
    font-weight: bold;
    border-radius: 6px;
    transition: background-color 0.3s ease;
}

.download-btn:hover {
    background: #0056b3;
}


</style>
<body>
    <div>
        <header>
            <div class="nav">
                <div class="navlogo">
                    <img src="{{ url_for('static', filename='images/icon.jpg') }}" alt="My Image" width="300" height="260">
                </div>
            </div>    
        </header>

        <div class="diva">
            <div class="unique-container">
                <h2 class="unique-heading">Enter Your Details</h2>
                <form class="unique-form" action="/submit" method="POST">
    
                    <!-- Name input with Voice -->
                    <div class="unique-input-group">
                        <label class="unique-label" for="name">Name / ‡≤π‡≥Ü‡≤∏‡≤∞‡≥Å:</label>
                        <input class="unique-input" type="text" id="name" name="username" required>
                    </div>
                
                    <!-- Patient ID input -->
                    <div class="unique-input-group">
                        <label class="unique-label" for="patientID">Patient ID / ‡≤∞‡≥ã‡≤ó‡≤ø‡≤Ø ‡≤ê‡≤°‡≤ø:</label>
                        <input class="unique-input" type="text" id="patientID" name="patientID" required>
                    </div>
                
                    <!-- Sex selection -->
                    <div class="unique-input-group">
                        <label class="unique-label" for="sex">Sex / ‡≤≤‡≤ø‡≤Ç‡≤ó:</label>
                        <select class="unique-input" id="sex" name="sex" required>
                            <option value="">Select</option>
                            <option value="male">Male ‚ôÇ</option>
                            <option value="female">Female ‚ôÄ</option>
                            <option value="other">Other ‚öß</option>
                        </select>
                    </div>
                
                <!-- Age input with Voice -->
<div class="unique-input-group">
    <label class="unique-label" for="age">Age / ‡≤µ‡≤Ø‡≤∏‡≥ç‡≤∏‡≥Å:</label>
    <input class="unique-input" type="number" id="age" name="age" required>
    <button class="unique-voice-btn" type="button" onclick="startVoiceInput('age')">üé§ Speak Age</button>
</div>

<!-- Blood Group selection -->
<div class="unique-input-group">
    <label class="unique-label" for="bloodGroup">Blood Group / ‡≤∞‡≤ï‡≥ç‡≤§ ‡≤ó‡≥Å‡≤Ç‡≤™‡≥Å:</label>
    <select class="unique-input" id="bloodGroup" name="bloodGroup" required>
        <option value="">Select</option>
        <option value="A+">A+</option>
        <option value="A-">A-</option>
        <option value="B+">B+</option>
        <option value="B-">B-</option>
        <option value="O+">O+</option>
        <option value="O-">O-</option>
        <option value="AB+">AB+</option>
        <option value="AB-">AB-</option>
    </select>
</div>

<!-- Kannada Symptoms Input -->
<div class="unique-input-group">
    <label class="unique-label" for="symptoms">Symptoms / ‡≤∞‡≥ã‡≤ó ‡≤≤‡≤ï‡≥ç‡≤∑‡≤£‡≤ó‡≤≥‡≥Å (Kannada):</label>
    <input class="unique-input" type="text" id="symptoms" name="symptoms" required oninput="translateSymptoms()">
    <button class="unique-voice-btn" type="button" id="recordSymptomsBtn" onclick="startVoiceRecording()">üé§ Speak Symptoms</button>
    <!-- Timer UI remains unchanged -->

                        <!-- Timer UI -->
                        <div id="timer-container" style="display: none; margin-top: 10px;">
                            <div id="timer-display" style="text-align: center; font-size: 18px; font-weight: bold;">30</div>
                            <div style="width: 100%; background-color: #ddd; height: 10px; margin-top: 5px; border-radius: 5px;">
                                <div id="timer-progress" style="width: 100%; height: 100%; background-color: #4CAF50; border-radius: 5px;"></div>
                            </div>
                        </div>
                    </div>
                
                    <!-- Translated Symptoms Display -->
                    <div class="unique-input-group">
                        <label class="unique-label" for="translatedSymptoms">Translated Symptoms (English):</label>
                        <input class="unique-input" type="text" id="translatedSymptoms" name="translatedSymptoms" readonly>
                    </div>
                
                    <!-- Submit button -->
                    <button class="unique-submit-btn" type="submit">Submit</button>
                </form>
            </div>
        </div>

    <!-- Replace the output-section div with this -->
<div class="output-section">
    {% if patient_details %}
    <h2>Prediction Results / ‡≤ä‡≤π‡≤ø‡≤∏‡≤ø‡≤¶ ‡≤´‡≤≤‡≤ø‡≤§‡≤æ‡≤Ç‡≤∂‡≤ó‡≤≥‡≥Å</h2>
    <p><strong>Recommended Department / ‡≤∂‡≤ø‡≤´‡≤æ‡≤∞‡≤∏‡≥Å ‡≤Æ‡≤æ‡≤°‡≤ø‡≤¶ ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó:</strong> {{ domain }}</p>
    <a href="/download/{{ pdf_name }}" class="download-btn">Download Report / ‡≤µ‡≤∞‡≤¶‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤°‡≥å‡≤®‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø</a>
    {% endif %}
</div>
        
        <div class="herosection">
            <div class="heromsg">
                <p>A Voice that cares.. and a friend who's always there..</p>
            </div>
        </div>

        <!-- JavaScript for voice input -->
        <script>
            function startVoiceInput(fieldId) {
                const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.lang = 'kn-IN'; // Kannada language

                recognition.onresult = function(event) {
                    document.getElementById(fieldId).value = event.results[0][0].transcript;
                };

                recognition.start();
            }
// Kannada-to-English translation dictionary
const kannadaToEnglish = {
    // General Medicine
    "‡≤Ü‡≤Ø‡≤æ‡≤∏": "fatigue",
    "‡≤ú‡≥ç‡≤µ‡≤∞": "fever",
    "‡≤§‡≤≤‡≥Ü ‡≤®‡≥ã‡≤µ‡≥Å": "headache",
    "‡≤§‡≤≤‡≥Ü‡≤®‡≥ã‡≤µ‡≥Å": "headache",
    "‡≤∏‡≤æ‡≤Æ‡≤æ‡≤®‡≥ç‡≤Ø ‡≤®‡≥ã‡≤µ‡≥Å": "generalized pain",
    "‡≤∏‡≤æ‡≤Æ‡≤æ‡≤®‡≥ç‡≤Ø‡≤®‡≥ã‡≤µ‡≥Å": "generalized pain",
    "‡≤∂‡≥Ä‡≤§": "cold",
    "‡≤∏‡≥Ä‡≤§‡≤æ": "cold",  
    "‡≤®‡≥Ü‡≤ó‡≤°‡≤ø":"cold",
    "‡≤ó‡≤æ‡≤Ø‡≤ó‡≤≥‡≥Å": "injuries",
    "‡≤Æ‡≤æ‡≤Ç‡≤∏‡≤ñ‡≤Ç‡≤° ‡≤®‡≥ã‡≤µ‡≥Å": "muscle pain",
    "‡≤Æ‡≥à ‡≤®‡≥ã‡≤µ‡≥Å": "body ache",
    "‡≤Æ‡≥à‡≤®‡≥ã‡≤µ‡≥Å": "body ache",
    "‡≤ö‡≤≥‡≤ø": "chills",
    "‡≤¶‡≥Å‡≤∞‡≥ç‡≤¨‡≤≤‡≤§‡≥Ü": "weakness",
    "‡≤π‡≤∏‡≤ø‡≤µ‡≤ø‡≤≤‡≥ç‡≤≤‡≤¶‡≤ø‡≤∞‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å": "loss of appetite",
    "‡≤ó‡≤Ç‡≤ü‡≤≤‡≥Å ‡≤®‡≥ã‡≤µ‡≥Å": "sore throat",
    "‡≤ó‡≤Ç‡≤ü‡≤≤‡≥Å‡≤®‡≥ã‡≤µ‡≥Å": "sore throat",

    // Cardiology
    "‡≤é‡≤¶‡≥Ü ‡≤®‡≥ã‡≤µ‡≥Å": "chest pain",
    "‡≤â‡≤∏‡≤ø‡≤∞‡≤æ‡≤ü‡≤¶ ‡≤§‡≥ä‡≤Ç‡≤¶‡≤∞‡≥Ü": "shortness of breath",
    "‡≤π‡≥É‡≤¶‡≤Ø ‡≤¨‡≤°‡≤ø‡≤§": "palpitations",
    "‡≤§‡≤≤‡≥Ü‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "dizziness",
    "‡≤∞‡≤ï‡≥ç‡≤§‡≤¶‡≥ä‡≤§‡≥ç‡≤§‡≤°": "blood pressure",
    "‡≤Ö‡≤®‡≤ø‡≤Ø‡≤Æ‡≤ø‡≤§ ‡≤π‡≥É‡≤¶‡≤Ø ‡≤¨‡≤°‡≤ø‡≤§": "irregular heartbeat",
    "‡≤Ö‡≤§‡≤ø‡≤Ø‡≤æ‡≤¶ ‡≤¨‡≥Ü‡≤µ‡≤∞‡≥Å": "excessive sweating",
    "‡≤Æ‡≥Ç‡≤∞‡≥ç‡≤õ‡≥Ü": "fainting",
    "‡≤§‡≥ã‡≤≥‡≤ø‡≤® ‡≤®‡≥ã‡≤µ‡≥Å": "arm pain",
    "‡≤§‡≥ã‡≤≥‡≤ø‡≤®‡≤®‡≥ã‡≤µ‡≥Å": "arm pain",
    "‡≤π‡≥É‡≤¶‡≤Ø ‡≤®‡≥ã‡≤µ‡≥Å": "heartpain",
    "‡≤π‡≥É‡≤¶‡≤Ø‡≤®‡≥ã‡≤µ‡≥Å": "heartpain",
    
    // Dentist
    "‡≤π‡≤≤‡≥ç‡≤≤‡≤ø‡≤® ‡≤®‡≥ã‡≤µ‡≥Å": "toothache",
    "‡≤π‡≤≤‡≥ç‡≤≤‡≤ø‡≤®‡≤®‡≥ã‡≤µ‡≥Å": "toothache",
    "‡≤π‡≤≤‡≥ç‡≤≤‡≥Å ‡≤®‡≥ã‡≤µ‡≥Å": "toothache",
    "‡≤π‡≤≤‡≥ç‡≤≤‡≥Å‡≤®‡≥ã‡≤µ‡≥Å": "toothache",
    "‡≤í‡≤∏‡≤°‡≥Å ‡≤ä‡≤§": "gum swelling",
    "‡≤í‡≤∏‡≤°‡≥Å‡≤ä‡≤§": "gum swelling",
    "‡≤∞‡≤ï‡≥ç‡≤§‡≤∏‡≥ç‡≤∞‡≤æ‡≤µ ‡≤í‡≤∏‡≤°‡≥Å‡≤ó‡≤≥‡≥Å": "bleeding gums",
    "‡≤í‡≤£‡≤¨‡≤æ‡≤Ø‡≤ø": "dry mouth",
    "‡≤í‡≤£ ‡≤¨‡≤æ‡≤Ø‡≤ø": "dry mouth",
    "‡≤ú‡≤ó‡≤ø‡≤Ø‡≥Å‡≤µ ‡≤§‡≥ä‡≤Ç‡≤¶‡≤∞‡≥Ü": "difficult chewing",
    "‡≤¶‡≤µ‡≤°‡≥Ü ‡≤®‡≥ã‡≤µ‡≥Å": "jaw pain",
    "‡≤¶‡≤µ‡≤°‡≥Ü‡≤®‡≥ã‡≤µ‡≥Å": "jaw pain",
    "‡≤¶‡≥Å‡≤∞‡≥ç‡≤µ‡≤æ‡≤∏‡≤®‡≥Ü ‡≤â‡≤∏‡≤ø‡≤∞‡≥Å": "bad breath",
    "‡≤π‡≤≤‡≥ç‡≤≤‡≤ø‡≤® ‡≤∏‡≤Ç‡≤µ‡≥á‡≤¶‡≤®‡≥Ü": "tooth sensitivity",
    "‡≤¨‡≤æ‡≤Ø‡≤ø ‡≤π‡≥Å‡≤£‡≥ç‡≤£‡≥Å‡≤ó‡≤≥‡≥Å": "mouth sores",
    "‡≤¨‡≤æ‡≤Ø‡≤ø ‡≤π‡≥Å‡≤£‡≥ç‡≤£‡≥Å‡≤ó‡≤≥‡≥Å": "mouth sores",
    "‡≤π‡≤≤‡≥ç‡≤≤‡≤ø‡≤® ‡≤ï‡≤≤‡≥Ü": "plaque buildup",
    "‡≤∏‡≤°‡≤ø‡≤≤ ‡≤π‡≤≤‡≥ç‡≤≤‡≥Å‡≤ó‡≤≥‡≥Å": "loose teeth",
    "‡≤¶‡≤µ‡≤°‡≥Ü ‡≤¨‡≤ø‡≤ó‡≥Å‡≤Æ‡≤æ‡≤®": "jaw stiffness",
    "‡≤ä‡≤¶‡≤ø‡≤¶ ‡≤≤‡≤∏‡≤ø‡≤ï‡≤æ ‡≤ó‡≥ç‡≤∞‡≤Ç‡≤•‡≤ø‡≤ó‡≤≥‡≥Å": "swollen lymph nodes",
    
    // Otolaryngology
    "‡≤ï‡≤ø‡≤µ‡≤ø ‡≤®‡≥ã‡≤µ‡≥Å": "ear pain",
    "‡≤ï‡≤ø‡≤µ‡≤ø‡≤®‡≥ã‡≤µ‡≥Å": "ear pain",
    "‡≤Æ‡≥Ç‡≤ó‡≥Å ‡≤ï‡≤ü‡≥ç‡≤ü‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "nasal congestion",
    "‡≤ï‡≤ø‡≤µ‡≤ø ‡≤ï‡≥á‡≤≥‡≤¶‡≤ø‡≤∞‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å": "hearing loss",
    "‡≤Æ‡≥Ç‡≤ó‡≥Å ‡≤∏‡≥ã‡≤∞‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "running nose",
    "‡≤ï‡≤ø‡≤µ‡≤ø ‡≤∏‡≥ç‡≤∞‡≤æ‡≤µ": "ear discharge",
    "‡≤ï‡≤ø‡≤µ‡≤ø‡≤∏‡≥ç‡≤∞‡≤æ‡≤µ": "ear discharge",
    "‡≤∏‡≥à‡≤®‡≤∏‡≥ç ‡≤í‡≤§‡≥ç‡≤§‡≤°": "sinus pressure",
    "‡≤Æ‡≥Ç‡≤ó‡≤ø‡≤® ‡≤π‡≤ø‡≤Ç‡≤≠‡≤æ‡≤ó‡≤¶ ‡≤∏‡≥ç‡≤∞‡≤æ‡≤µ": "postnasal drip",
    "‡≤∏‡≥Ä‡≤®‡≥Å": "sneezing",
    "‡≤ß‡≥ç‡≤µ‡≤®‡≤ø ‡≤ï‡≤∞‡≤ï‡≥Å‡≤∂‡≤§‡≥Ü": "voice hoarseness",
    "‡≤ï‡≥Ü‡≤Æ‡≥ç‡≤Æ‡≥Å": "cough",
    "‡≤ó‡≤Ç‡≤ü‡≤≤‡≥Å ‡≤ï‡≤ø‡≤∞‡≤ø‡≤ï‡≤ø‡≤∞‡≤ø": "throat irritation",
    
    // Neurology
    "‡≤Æ‡≤∞‡≤ó‡≤ü‡≥ç‡≤ü‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "numbness",
    "‡≤ú‡≥Å‡≤Æ‡≥ç‡≤Æ‡≥Ü‡≤®‡≤ø‡≤∏‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "tingling",
    "‡≤§‡≤≤‡≥Ü‡≤®‡≥ã‡≤µ‡≤ø‡≤®‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤§‡≤≤‡≥Ü‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "dizziness with headache",
    "‡≤ï‡≥Ä‡≤≤‡≥Å ‡≤®‡≥ã‡≤µ‡≥Å": "joint pain",
    "‡≤ï‡≥Ä‡≤≤‡≥Å‡≤®‡≥ã‡≤µ‡≥Å": "joint pain",
    "‡≤¨‡≥Ü‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≥ã‡≤µ‡≥Å": "back pain",
    "‡≤¨‡≥Ü‡≤®‡≥ç‡≤®‡≥Å‡≤®‡≥ã‡≤µ‡≥Å": "back pain",
    "‡≤®‡≤∞ ‡≤®‡≥ã‡≤µ‡≥Å": "nerve pain",
    "‡≤®‡≤∞‡≤®‡≥ã‡≤µ‡≥Å": "nerve pain",
    "‡≤¶‡≥É‡≤∑‡≥ç‡≤ü‡≤ø ‡≤∏‡≤Æ‡≤∏‡≥ç‡≤Ø‡≥Ü‡≤ó‡≤≥‡≥Å": "vision problems",
    "‡≤Æ‡≥Ç‡≤∞‡≥ç‡≤õ‡≥Ü‡≤∞‡≥ã‡≤ó": "seizures",
    "‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≥Å‡≤µ ‡≤§‡≥ä‡≤Ç‡≤¶‡≤∞‡≥Ü": "speech difficulty",
    "‡≤¶‡≥Å‡≤∞‡≥ç‡≤¨‡≤≤ ‡≤∏‡≤Æ‡≤®‡≥ç‡≤µ‡≤Ø": "poor coordination",
    "‡≤®‡≥Ü‡≤®‡≤™‡≤ø‡≤® ‡≤®‡≤∑‡≥ç‡≤ü": "memory loss",
    
    // Gastroenterology
    "‡≤π‡≥ä‡≤ü‡≥ç‡≤ü‡≥Ü ‡≤®‡≥ã‡≤µ‡≥Å": "abdominal pain",
    "‡≤π‡≥ä‡≤ü‡≥ç‡≤ü‡≥Ü‡≤®‡≥ã‡≤µ‡≥Å": "abdominal pain",
    "‡≤Ö‡≤§‡≤ø‡≤∏‡≤æ‡≤∞": "diarrhea",
    "‡≤Æ‡≤≤‡≤¨‡≤¶‡≥ç‡≤ß‡≤§‡≥Ü": "constipation",
    "‡≤µ‡≤æ‡≤ï‡≤∞‡≤ø‡≤ï‡≥Ü": "nausea",
    "‡≤µ‡≤æ‡≤Ç‡≤§‡≤ø": "vomiting",
    "‡≤§‡≥Ç‡≤ï ‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≤≥": "weight gain",
    "‡≤ú‡≥Ä‡≤∞‡≥ç‡≤£‡≤æ‡≤Ç‡≤ó‡≤¶": "gastric",
    "‡≤â‡≤¨‡≥ç‡≤¨‡≤∞": "bloating",
    "‡≤Ü‡≤Æ‡≥ç‡≤≤ ‡≤π‡≤ø‡≤®‡≥ç‡≤®‡≤°‡≥Ü": "acid reflux",
    "‡≤π‡≥ä‡≤ü‡≥ç‡≤ü‡≥Ü ‡≤∏‡≥Ü‡≤≥‡≥Ü‡≤§": "stomach cramps",
    "‡≤Ö‡≤ú‡≥Ä‡≤∞‡≥ç‡≤£": "indigestion",
    
    // Pulmonology
    "‡≤ò‡≤∞‡≥ç‡≤ò‡≤∞ ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø": "wheezing",
    "‡≤é‡≤¶‡≥Ü ‡≤¨‡≤ø‡≤ó‡≥Å‡≤Æ‡≤æ‡≤®": "chest tightness",
    "‡≤§‡≥Ç‡≤ï ‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü‡≤Ø‡≤æ‡≤ó‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "weight loss",
    "‡≤ï‡≤´": "phlegm",
    "‡≤∞‡≤æ‡≤§‡≥ç‡≤∞‡≤ø ‡≤¨‡≥Ü‡≤µ‡≤∞‡≥Å": "night sweats",
    "‡≤¶‡≥Ä‡≤∞‡≥ç‡≤ò‡≤ï‡≤æ‡≤≤‡≥Ä‡≤® ‡≤ï‡≥Ü‡≤Æ‡≥ç‡≤Æ‡≥Å": "chronic cough",
    "‡≤â‡≤∏‡≤ø‡≤∞‡≤æ‡≤°‡≤≤‡≥Å ‡≤ï‡≤∑‡≥ç‡≤ü": "difficulty breathing",
    "‡≤®‡≥Ä‡≤≤‡≤ø ‡≤§‡≥Å‡≤ü‡≤ø‡≤ó‡≤≥‡≥Å": "blue lips",
    "‡≤é‡≤¶‡≥Ü ‡≤Ö‡≤∏‡≥ç‡≤µ‡≤∏‡≥ç‡≤•‡≤§‡≥Ü": "chest discomfort",
    
    // Dermatology
    "‡≤ï‡≥ä‡≤∞‡≥Ü‡≤§": "itching",
    "‡≤ö‡≤∞‡≥ç‡≤Æ‡≤¶ ‡≤ó‡≥Å‡≤≥‡≥ç‡≤≥‡≥Ü‡≤ó‡≤≥‡≥Å": "rashes",
    "‡≤ï‡≥Ü‡≤Ç‡≤™‡≤æ‡≤ó‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "redness",
    "‡≤ä‡≤§": "swelling",
    "‡≤í‡≤£ ‡≤ö‡≤∞‡≥ç‡≤Æ": "dry skin",
    "‡≤í‡≤£‡≤ö‡≤∞‡≥ç‡≤Æ": "dry skin",
    "‡≤ï‡≥Ç‡≤¶‡≤≤‡≥Å ‡≤â‡≤¶‡≥Å‡≤∞‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "hair loss",
    "‡≤∏‡≥Å‡≤≤‡≤≠‡≤µ‡≤æ‡≤ó‡≤ø ‡≤Æ‡≥Å‡≤∞‡≤ø‡≤Ø‡≥Å‡≤µ ‡≤â‡≤ó‡≥Å‡≤∞‡≥Å": "brittle nails",
    "‡≤ï‡≥ä‡≤∞‡≤ï‡≥Å": "eczema",
    "‡≤ö‡≤∞‡≥ç‡≤Æ‡≤¶ ‡≤é‡≤§‡≥ç‡≤§‡≤∞‡≤ø‡≤∏‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "hives",
    "‡≤Æ‡≥Å‡≤ñ‡≤¶ ‡≤ó‡≥Å‡≤≥‡≥ç‡≤≥‡≥Ü‡≤ó‡≤≥‡≥Å": "acne",
    "‡≤Æ‡≥Å‡≤ñ‡≤¶‡≤ó‡≥Å‡≤≥‡≥ç‡≤≥‡≥Ü‡≤ó‡≤≥‡≥Å": "acne",
    "‡≤ö‡≤∞‡≥ç‡≤Æ ‡≤∏‡≥Å‡≤≤‡≤ø‡≤Ø‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "peeling skin",
    "‡≤®‡≥Ä‡≤∞‡≥Å‡≤ó‡≤ü‡≥ç‡≤ü‡≥Å‡≤ó‡≤≥‡≥Å": "blisters",
    "‡≤ï‡≤™‡≥ç‡≤™‡≥Å ‡≤ï‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å": "dark spots",
    "‡≤ï‡≤™‡≥ç‡≤™‡≥Å‡≤ï‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å": "dark spots",
    
    // Urology
    "‡≤®‡≥ã‡≤µ‡≤ø‡≤® ‡≤Æ‡≥Ç‡≤§‡≥ç‡≤∞ ‡≤µ‡≤ø‡≤∏‡≤∞‡≥ç‡≤ú‡≤®‡≥Ü": "painful urination",
    "‡≤™‡≤¶‡≥á ‡≤™‡≤¶‡≥á ‡≤Æ‡≥Ç‡≤§‡≥ç‡≤∞ ‡≤µ‡≤ø‡≤∏‡≤∞‡≥ç‡≤ú‡≤®‡≥Ü": "frequent urination",
    "‡≤Æ‡≥Ç‡≤§‡≥ç‡≤∞‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤∞‡≤ï‡≥ç‡≤§": "hematuria",
    "‡≤ï‡≥Ü‡≤≥ ‡≤π‡≥ä‡≤ü‡≥ç‡≤ü‡≥Ü ‡≤®‡≥ã‡≤µ‡≥Å": "lower abdominal pain",
    "‡≤â‡≤∞‡≤ø‡≤Ø‡≥Å‡≤µ ‡≤≠‡≤æ‡≤µ‡≤®‡≥Ü": "burning sensation",
    "‡≤Æ‡≤¨‡≥ç‡≤¨‡≤æ‡≤¶ ‡≤Æ‡≥Ç‡≤§‡≥ç‡≤∞": "cloudy urine",
    "‡≤§‡≥Ä‡≤µ‡≥ç‡≤∞ ‡≤Æ‡≥Ç‡≤§‡≥ç‡≤∞ ‡≤µ‡≤æ‡≤∏‡≤®‡≥Ü": "strong urine odor",
    "‡≤∏‡≥ä‡≤Ç‡≤ü‡≤¶ ‡≤Ö‡≤∏‡≥ç‡≤µ‡≤∏‡≥ç‡≤•‡≤§‡≥Ü": "pelvic discomfort",
    "‡≤Æ‡≥Ç‡≤§‡≥ç‡≤∞ ‡≤µ‡≤ø‡≤∏‡≤∞‡≥ç‡≤ú‡≤®‡≥Ü‡≤Ø ‡≤§‡≥Å‡≤∞‡≥ç‡≤§‡≥Å": "urinary urgency",
    "‡≤Æ‡≥Ç‡≤§‡≥ç‡≤∞‡≤™‡≤ø‡≤Ç‡≤°‡≤¶ ‡≤®‡≥ã‡≤µ‡≥Å": "kidney pain",
    "‡≤Æ‡≥Ç‡≤§‡≥ç‡≤∞ ‡≤â‡≤≥‡≤ø‡≤∏‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "urine retention",
    
    // Gynecology
    "‡≤∏‡≥ä‡≤Ç‡≤ü‡≤¶ ‡≤®‡≥ã‡≤µ‡≥Å": "pelvic pain",
    "‡≤Ö‡≤®‡≤ø‡≤Ø‡≤Æ‡≤ø‡≤§ ‡≤Æ‡≥Å‡≤ü‡≥ç‡≤ü‡≥Å": "irregular menstruation",
    "‡≤Ø‡≥ã‡≤®‡≤ø ‡≤∏‡≥ç‡≤∞‡≤æ‡≤µ": "vaginal discharge",
    "‡≤∏‡≥ç‡≤§‡≤® ‡≤®‡≥ã‡≤µ‡≥Å": "breast tenderness",
    "‡≤∏‡≤Ç‡≤≠‡≥ã‡≤ó‡≤¶ ‡≤∏‡≤Æ‡≤Ø‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤®‡≥ã‡≤µ‡≥Å": "pain during intercourse",
    "‡≤π‡≥ä‡≤ü‡≥ç‡≤ü‡≥Ü ‡≤π‡≤ø‡≤Ç‡≤°‡≤ø": "cramps",
    "‡≤Æ‡≤®‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø ‡≤¨‡≤¶‡≤≤‡≤æ‡≤µ‡≤£‡≥Ü": "mood swings",
    "‡≤¨‡≤ø‡≤∏‡≤ø ‡≤â‡≤∞‡≤ø‡≤§": "hot flashes",
    "‡≤Ö‡≤ß‡≤ø‡≤ï ‡≤∞‡≤ï‡≥ç‡≤§‡≤∏‡≥ç‡≤∞‡≤æ‡≤µ": "heavy bleeding",
    "‡≤ï‡≥ä‡≤∞‡≥Ü‡≤§": "itching",
    "‡≤â‡≤∞‡≤ø‡≤Ø‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü": "burning",
    "‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤¨‡≥Ü‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≥ã‡≤µ‡≥Å": "lower back pain",
    
    // Psychiatry
    "‡≤Ü‡≤§‡≤Ç‡≤ï": "anxiety",
    "‡≤®‡≤ø‡≤¶‡≥ç‡≤∞‡≤æ ‡≤µ‡≥ç‡≤Ø‡≤§‡≥ç‡≤Ø‡≤Ø": "sleep disturbances",
    "‡≤è‡≤ï‡≤æ‡≤ó‡≥ç‡≤∞‡≤§‡≥Ü ‡≤ï‡≥ä‡≤∞‡≤§‡≥Ü": "lack of concentration",
    "‡≤ö‡≤°‡≤™‡≤°‡≤ø‡≤ï‡≥Ü": "agitation",
    "‡≤∏‡≥ç‡≤Æ‡≤∞‡≤£ ‡≤∂‡≤ï‡≥ç‡≤§‡≤ø ‡≤∏‡≤Æ‡≤∏‡≥ç‡≤Ø‡≥Ü‡≤ó‡≤≥‡≥Å": "memory problems",
    "‡≤ö‡≤ø‡≤°‡≥Å‡≤ï‡≥Å‡≤§‡≤®": "irritability",
    "‡≤ñ‡≤ø‡≤®‡≥ç‡≤®‡≤§‡≥Ü": "depression",
    "‡≤∏‡≤æ‡≤Æ‡≤æ‡≤ú‡≤ø‡≤ï ‡≤π‡≤ø‡≤Ç‡≤¶‡≥Ü‡≤ó‡≥Ü‡≤§": "social withdrawal",
    "‡≤≠‡≥ç‡≤∞‡≤Æ‡≥Ü‡≤ó‡≤≥‡≥Å": "hallucinations",
    "‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤™‡≥ç‡≤∞‡≥á‡≤∞‡≤£‡≥Ü": "low motivation",
    "‡≤Ö‡≤∂‡≤æ‡≤Ç‡≤§‡≤ø": "restlessness"  };

    function translateKannadaToEnglish(inputText) {
        // Split input into words (in case user says multiple symptoms)
        let words = inputText.split(/\s+/);

        // Translate each word if it exists in the dictionary
        let translatedWords = words.map(word => kannadaToEnglish[word] || word);

        // Join back into a string and return
        return translatedWords.join(" ");
    }

    function startVoiceRecording() {
        let recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = "kn-IN";  // Set Kannada as input language

        recognition.start();

        recognition.onresult = function(event) {
            let kannadaText = event.results[0][0].transcript;  // Get transcribed Kannada text
            let englishText = translateKannadaToEnglish(kannadaText);  // Translate to English

            document.getElementById("symptoms").value = englishText;  // Show in input field
        };

        recognition.onerror = function(event) {
            console.error("Speech recognition error:", event.error);
        };
    }
        
    // New function for timer-based symptom recording
    let symptomsRecognition;
    let timerInterval;
    let remainingTime = 30;
    function startVoiceRecording() {
    // Check if browser supports Speech Recognition
    if (!('SpeechRecognition' in window || 'webkitSpeechRecognition' in window)) {
        alert("Sorry, your browser doesn't support speech recognition. Please try using Chrome.");
        return;
    }
    
    // Initialize speech recognition
    symptomsRecognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    symptomsRecognition.lang = 'kn-IN'; // Kannada language
    symptomsRecognition.continuous = true; // Allow continuous recording
    symptomsRecognition.interimResults = true; // Get interim results
    
    // Clear previous input
    document.getElementById('symptoms').value = "";
    document.getElementById('translatedSymptoms').value = "";
    
    // Show and reset timer
    remainingTime = 30;
    document.getElementById('timer-container').style.display = 'block';
    document.getElementById('timer-display').textContent = remainingTime;
    document.getElementById('timer-progress').style.width = '100%';
    document.getElementById('recordSymptomsBtn').disabled = true;
    document.getElementById('recordSymptomsBtn').textContent = 'üî¥ Recording...';
    
    // Handle results
    let finalTranscript = '';
    
    symptomsRecognition.onresult = function(event) {
        let interimTranscript = '';
        
        for (let i = event.resultIndex; i < event.results.length; i++) {
            const transcript = event.results[i][0].transcript;
            if (event.results[i].isFinal) {
                finalTranscript += transcript + ' ';
            } else {
                interimTranscript += transcript;
            }
        }
        
        // Update the input field with Kannada transcription
        const kannadaText = finalTranscript + interimTranscript;
        document.getElementById('symptoms').value = kannadaText;
        
        // Translate to English and update the translated field
        translateSymptoms();
        
    };
    
    // Handle end of recognition
    symptomsRecognition.onend = function() {
        stopRecording();
    };
    
    // Start recognition
    symptomsRecognition.start();
    
    // Start timer
    startTimer();
}

function translateSymptoms() {
    const kannadaText = document.getElementById('symptoms').value;
    
    if (!kannadaText) {
        document.getElementById('translatedSymptoms').value = "";
        return;
    }
    
    // First split by commas to separate different symptom entries
    const symptomGroups = kannadaText.split(',').map(s => s.trim());
    let allTranslatedSymptoms = [];
    
    for (const symptomGroup of symptomGroups) {
        const words = symptomGroup.split(/\s+/).filter(word => word.trim().length > 0);
        let i = 0;
        let groupTranslations = [];
        
        while (i < words.length) {
            let translated = false;
            
            // Try multi-word phrases first (starting with longest possible)
            for (let phraseLength = Math.min(3, words.length - i); phraseLength > 1; phraseLength--) {
                if (i + phraseLength <= words.length) {
                    const phrase = words.slice(i, i + phraseLength).join(" ");
                    if (kannadaToEnglish[phrase]) {
                        groupTranslations.push(kannadaToEnglish[phrase]);
                        i += phraseLength;
                        translated = true;
                        break;
                    }
                }
            }
            
            // If no multi-word match found, try single word
            if (!translated) {
                const word = words[i];
                groupTranslations.push(kannadaToEnglish[word] || word);
                i++;
            }
        }
        
        // Add all translations from this group
        allTranslatedSymptoms = allTranslatedSymptoms.concat(groupTranslations);
    }
    
    // Join all translated symptoms with commas
    document.getElementById('translatedSymptoms').value = allTranslatedSymptoms.join(", ");
}

function stopRecording() {
    // Stop the recognition
    if (symptomsRecognition) {
        symptomsRecognition.stop();
    }
    
    // Clear the timer
    clearInterval(timerInterval);
    
    // Reset UI
    document.getElementById('timer-container').style.display = 'none';
    document.getElementById('recordSymptomsBtn').disabled = false;
    document.getElementById('recordSymptomsBtn').textContent = 'üé§ Speak Symptoms';
    
    // Make sure translation is complete
    translateSymptoms();
}

function startTimer() {
    // Reset timer values
    remainingTime = 30;
    document.getElementById('timer-display').textContent = remainingTime;
    document.getElementById('timer-progress').style.width = '100%';
    
    // Clear any existing interval
    if (timerInterval) {
        clearInterval(timerInterval);
    }
    
    // Start new timer interval
    timerInterval = setInterval(function() {
        remainingTime--;
        
        // Update timer display
        document.getElementById('timer-display').textContent = remainingTime;
        
        // Update progress bar (calculate percentage of time remaining)
        const percentRemaining = (remainingTime / 30) * 100;
        document.getElementById('timer-progress').style.width = percentRemaining + '%';
        
        // Change color as time decreases
        if (remainingTime <= 10) {
            document.getElementById('timer-progress').style.backgroundColor = '#ff9800'; // Orange
        }
        if (remainingTime <= 5) {
            document.getElementById('timer-progress').style.backgroundColor = '#f44336'; // Red
        }
        
        // Stop recording when timer reaches zero
        if (remainingTime <= 0) {
            stopRecording();
        }
    }, 1000);
}

        </script>
    </div>
</body>
</html>